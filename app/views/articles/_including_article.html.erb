<div class="row justify-content-center">

  <% if action_name == "user_timeline" %>

    <%= render 'articles/timeline_bar', post: post %>

  <% else %>

    <%= render 'articles/timeline_bar' %>

  <% end %>

  <div class="including-article-size">

    <div class="card card-size">

      <%= attachment_image_tag article, :image, fallback: "no_image.jpg", class: "img-trim"  %>
      <div class="card-img-overlay article-bg-index">
        <div>
          <div class="row">

            <div class="col-12 ranking-table align-self-center">
              <%= attachment_image_tag article.user, :image, fallback: "no_image.jpg", class: "mx-1 card-img", style: "max-height: 40px; max-width: 40px;"%>
              <span>
                <%= link_to article.user.user_name, user_path(article.user_id), class: "text-border-black border-bottom border-secondary text-white" %>
              </span>
            </div>

          </div>
        </div>

        <div class="card-body">

          <div class="row">
            <div class="col-12">
              <span>
                <%= link_to article.title, article_path(article), class: "text-border text-white border-bottom border-secondary d-sm-inline d-none" %>
                <%= link_to article.title.truncate(30), article_path(article), class: "text-border text-white border-bottom border-secondary d-sm-none" %>
              </span>
            </div>

            <div class="text-light article-info">

              <% if user_signed_in? %>

                <% if article.favorited_by?(current_user) %>

                  <span class="mx-1 favorite-color">
                    <%= fa_icon("thumbs-up") %><%= article.favorites.count %>
                  </span>

                <% else %>

                  <span class="mx-1">
                    <%= fa_icon("thumbs-up") %><%= article.favorites.count %>
                  </span>

                <% end %>

                <% if article.kept_by?(current_user) %>

                  <span class="mx-1 keep-color"">
                    <%= fa_icon("folder-open") %><%= article.keeps.count %>
                  </span>

                <% else %>

                  <span class="mx-1">
                    <%= fa_icon("folder-open") %><%= article.keeps.count %>
                  </span>

                <% end %>

                <% if article.comments.where(user_id: current_user.id).exists? %>

                  <span class="mx-1 comment-color">
                    <%= fa_icon("comments") %><%= article.comments.count %>
                  </span>

                <% else %>

                  <span class="mx-1">
                    <%= fa_icon("comments") %><%= article.comments.count %>
                  </span>

                <% end %>

              <% else %>

                <span class="mx-1">
                  <%= fa_icon("thumbs-up") %><%= article.favorites.count %>
                </span>

                <span class="mx-1">
                  <%= fa_icon("folder-open") %><%= article.keeps.count %>
                </span>

                <span class="mx-1">
                  <%= fa_icon("comments") %><%= article.comments.count %>
                </span>

              <% end %>

            </div>

          </div>


        </div>
      </div>
    </div>

  </div>

  <% if action_name == "user_timeline" %>

    <%= render 'articles/timeline_bar', post: post %>

  <% else %>

    <%= render 'articles/timeline_bar' %>

  <% end %>

</div>